<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Topic 17: Activity Lifecycle & Rotation ‚Äî Research Coach</title>
    <meta name="description"
        content="Research methodology guide for understanding the Activity Lifecycle and handling rotation effects in Android.">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link
        href="https://fonts.googleapis.com/css2?family=DM+Sans:ital,opsz,wght@0,9..40,300;0,9..40,400;0,9..40,500;0,9..40,600;0,9..40,700;1,9..40,400&family=DM+Serif+Display&family=JetBrains+Mono:wght@400;500&display=swap"
        rel="stylesheet">
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    fontFamily: { sans: ['DM Sans', 'sans-serif'], serif: ['DM Serif Display', 'serif'] },
                    colors: { tru: { primary: '#003C5C', 'primary-light': '#0A5A7C', secondary: '#00594C', 'secondary-light': '#007A68', accent: '#E8963E', 'accent-light': '#F0AE6A' } }
                }
            }
        }
    </script>
    <link rel="stylesheet" href="../styles.css">
</head>

<body class="min-h-screen bg-gray-50">

    <!-- HERO -->
    <header class="topic-hero text-white">
        <div class="relative z-10 max-w-6xl mx-auto px-6 py-12 md:py-16">
            <a href="../index.html" class="back-link mb-6 inline-flex">
                <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7" />
                </svg>
                Back to All Topics
            </a>
            <div class="flex items-center gap-3 mt-6 mb-4">
                <span class="topic-number text-lg" style="background:rgba(255,255,255,0.2);">17</span>
                <span class="category-badge badge-architecture"
                    style="background:rgba(255,255,255,0.15);color:#fff;">Architecture</span>
            </div>
            <h1 class="font-serif text-3xl md:text-4xl lg:text-5xl leading-tight mb-4">
                The "Spin" Problem:<br>Lifecycle & Rotation
            </h1>
            <p class="text-white/80 text-lg max-w-3xl leading-relaxed">
                Ever wonder why your app loses data the moment you rotate your phone? Research the Android Activity
                Lifecycle and learn how to manage state so your users never feel the "restart."
            </p>
        </div>
    </header>

    <!-- MAIN -->
    <div class="max-w-6xl mx-auto px-6 py-10">
        <div class="flex flex-col lg:flex-row gap-8">

            <!-- Sidebar -->
            <aside class="lg:w-64 flex-shrink-0">
                <nav class="sidebar-nav sticky top-6 bg-white rounded-2xl border p-4 shadow-sm"
                    style="border-color:var(--border-light);">
                    <h4 class="text-xs font-bold uppercase tracking-wider text-gray-400 mb-3 px-3">On This Page</h4>
                    <a href="#overview" class="active">üìã Research Overview</a>
                    <a href="#background">üìö Background Reading</a>
                    <a href="#key-concepts">üí° Key Concepts</a>
                    <a href="#methodology">üî¨ Methodology</a>
                    <a href="#experiments">üß™ Experiments</a>
                    <a href="#alternatives">üîÑ Alternative Approaches</a>
                    <a href="#poster-tips">üé® Poster Tips</a>
                    <a href="#pitfalls">‚ö†Ô∏è Common Pitfalls</a>
                    <a href="#checklist">‚úÖ Checklist</a>
                </nav>
            </aside>

            <!-- Content -->
            <main class="flex-1 min-w-0">

                <!-- OVERVIEW -->
                <section id="overview" class="content-section animate-in">
                    <h2>üìã Research Overview</h2>
                    <p class="text-gray-600 leading-relaxed mb-4">In Android, rotating your screen isn't just a UI
                        change‚Äîit's a **Configuration Change**. By default, Android completely destroys your current
                        Activity and creates a brand-new one from scratch to match the new screen orientation. If you
                        don't handle this correctly, all of your app's temporary data (like text in a field or a game
                        score) is lost instantly.</p>
                    <p class="text-gray-600 leading-relaxed mb-4">In this research, you will explore the "Activity
                        Lifecycle" to understand the sequence of events that happen during a rotation. You'll benchmark
                        different ways to save state‚Äîfrom the old-school `onSaveInstanceState` bundle to the modern
                        architectural standard: **ViewModels**.</p>

                    <div class="callout callout-info">
                        <div class="callout-icon">üí°</div>
                        <div><strong>Research Goal:</strong> Understand the destruction and recreation cycle of an
                            Android Activity and compare the efficiency of different state-preservation techniques.
                        </div>
                    </div>

                    <h3>What Will Your Research Poster Show?</h3>
                    <ul class="list-disc list-inside text-gray-600 space-y-2 ml-2">
                        <li>A **Lifecycle Timeline**: What methods fire when the phone rotates?</li>
                        <li>The "Data Loss Gap": A comparison of an unprotected app vs. a managed app.</li>
                        <li>Comparison of **Bundles vs. ViewModels**: Which is easier to implement?</li>
                        <li>Visual proof of **State Persistence** (screenshots of values surviving rotation).</li>
                        <li>Analysis of "Configuration Changes" beyond just rotation (e.g., resizing, dark mode).</li>
                    </ul>
                </section>

                <!-- BACKGROUND -->
                <section id="background" class="content-section animate-in">
                    <h2>üìö Background Reading</h2>
                    <p class="text-gray-600 leading-relaxed mb-4">Start by understanding the "Birth and Death" of an
                        Android app.</p>

                    <div class="space-y-3">
                        <div class="bg-gray-50 rounded-xl p-4 border" style="border-color:var(--border-light);">
                            <h4 class="font-semibold text-tru-primary text-sm mb-1">üìñ The Official Docs</h4>
                            <ul class="text-sm text-gray-600 space-y-1 ml-4 list-disc">
                                <li><a href="https://developer.android.com/guide/components/activities/activity-lifecycle"
                                        class="text-tru-secondary hover:underline" target="_blank">Activity Lifecycle
                                        Guide</a> ‚Äî Essential reading</li>
                                <li><a href="https://developer.android.com/topic/libraries/architecture/viewmodel"
                                        class="text-tru-secondary hover:underline" target="_blank">ViewModel
                                        Overview</a> ‚Äî The modern way to handle state</li>
                                <li><a href="https://developer.android.com/guide/topics/resources/runtime-changes"
                                        class="text-tru-secondary hover:underline" target="_blank">Handling
                                        Configuration Changes</a></li>
                            </ul>
                        </div>
                        <div class="bg-gray-50 rounded-xl p-4 border" style="border-color:var(--border-light);">
                            <h4 class="font-semibold text-tru-primary text-sm mb-1">üîç Visual Learning</h4>
                            <ul class="text-sm text-gray-600 space-y-1 ml-4 list-disc">
                                <li>Search: <em>"Android Activity Lifecycle diagram simplified"</em></li>
                                <li>Search: <em>"ViewModel vs onSaveInstanceState difference"</em></li>
                            </ul>
                        </div>

                        <div class="callout callout-tip">
                            <div class="callout-icon">üìå</div>
                            <div><strong>Research Tip:</strong> Pay special attention to
                                <code>isChangingConfigurations()</code>. This method tells you if the Activity is dying
                                because of a rotation or because the user actually closed it!
                            </div>
                        </div>
                    </div>
                </section>

                <!-- KEY CONCEPTS -->
                <section id="key-concepts" class="content-section animate-in">
                    <h2>üí° Key Concepts</h2>
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                        <div class="bg-gradient-to-br from-teal-50 to-cyan-50 rounded-xl p-5 border border-teal-100">
                            <h4 class="font-semibold text-tru-primary mb-2">The Bundle</h4>
                            <p class="text-sm text-gray-600">A small "suitcase" (using `onSaveInstanceState`) where you
                                can pack primitive data like numbers and strings before the Activity is destroyed. It's
                                safe but limited in size.</p>
                        </div>
                        <div class="bg-gradient-to-br from-teal-50 to-cyan-50 rounded-xl p-5 border border-teal-100">
                            <h4 class="font-semibold text-tru-primary mb-2">Configuration Change</h4>
                            <p class="text-sm text-gray-600">Events like rotating the screen, changing system language,
                                or connecting a keyboard. Each one triggers a full restart of your Activity by default.
                            </p>
                        </div>
                        <div
                            class="bg-gradient-to-br from-amber-50 to-orange-50 rounded-xl p-5 border border-amber-100">
                            <h4 class="font-semibold text-tru-primary mb-2">ViewModel</h4>
                            <p class="text-sm text-gray-600">A special object that lives "outside" the Activity. When
                                the Activity dies and restarts due to rotation, the ViewModel stays alive in memory,
                                keeping your data perfectly intact.</p>
                        </div>
                        <div
                            class="bg-gradient-to-br from-amber-50 to-orange-50 rounded-xl p-5 border border-amber-100">
                            <h4 class="font-semibold text-tru-primary mb-2">State Restoration</h4>
                            <p class="text-gray-600 text-sm">The process of reading your saved data back into the UI
                                once the new Activity has started (typically in `onCreate` or `onRestoreInstanceState`).
                            </p>
                        </div>
                    </div>
                </section>

                <!-- METHODOLOGY -->
                <section id="methodology" class="content-section animate-in">
                    <h2>üî¨ Step-by-Step Methodology</h2>
                    <p class="text-gray-600 leading-relaxed mb-6">Build a "Counter App" to observe and fix the rotation
                        problem.</p>

                    <div class="step-card">
                        <div class="flex items-start gap-3">
                            <span class="step-number">1</span>
                            <div>
                                <h4 class="font-semibold text-gray-800 mb-2">The "Data Loss" Baseline</h4>
                                <p class="text-sm text-gray-600 mb-2">Create an Activity with a `TextView` and a
                                    `Button` that increments a counter variable. Launch the app, click the button 5
                                    times, then **rotate the device**. Observe how the counter resets to 0.</p>
                            </div>
                        </div>
                    </div>

                    <div class="step-card">
                        <div class="flex items-start gap-3">
                            <span class="step-number">2</span>
                            <div>
                                <h4 class="font-semibold text-gray-800 mb-2">Logging the Lifecycle</h4>
                                <p class="text-sm text-gray-600 mb-2">Add `Log.d` statements to every lifecycle method.
                                    Watch **Logcat** as you rotate. You should see `onPause` -> `onStop` -> `onDestroy`
                                    followed immediately by a new `onCreate`.</p>
                                <div class="code-block">
                                    <span class="code-label">Kotlin</span>
                                    <pre>override fun onSaveInstanceState(outState: Bundle) {
    super.onSaveInstanceState(outState)
    outState.putInt("count_key", counter)
    Log.d("Lifecycle", "Saving State!")
}</pre>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="step-card">
                        <div class="flex items-start gap-3">
                            <span class="step-number">3</span>
                            <div>
                                <h4 class="font-semibold text-gray-800 mb-2">Fixing with Bundles</h4>
                                <p class="text-sm text-gray-600 mb-2">Implement `onSaveInstanceState` and
                                    `onRestoreInstanceState`. Use the Bundle to "bridge" the gap between the old and new
                                    Activity. Verify the count survives! </p>
                            </div>
                        </div>
                    </div>

                    <div class="step-card">
                        <div class="flex items-start gap-3">
                            <span class="step-number">4</span>
                            <div>
                                <h4 class="font-semibold text-gray-800 mb-2">The Modern Fix: ViewModel</h4>
                                <p class="text-sm text-gray-600 mb-2">Refactor your app to use a `ViewModel` for the
                                    counter. Observe that you no longer need `onSaveInstanceState` for simple rotation,
                                    as the ViewModel persistent during configuration changes.</p>
                                <div class="code-block">
                                    <span class="code-label">Kotlin</span>
                                    <pre>class MainViewModel : ViewModel() {
    var counter = 0
}</pre>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="step-card">
                        <div class="flex items-start gap-3">
                            <span class="step-number">5</span>
                            <div>
                                <h4 class="font-semibold text-gray-800 mb-2">Stress Test: Rapid Rotations</h4>
                                <p class="text-sm text-gray-600 mb-2">Perform 10 rotations back-to-back. Does the memory
                                    usage spike? Does the app feel sluggish? Record any "ghosting" or UI glitches during
                                    the transitions.</p>
                            </div>
                        </div>
                    </div>
                </section>

                <!-- EXPERIMENTS -->
                <section id="experiments" class="content-section animate-in">
                    <h2>üß™ Possible Experiments</h2>

                    <div class="space-y-4">
                        <div class="bg-white rounded-xl border-2 p-5" style="border-color:#E8F5E9;">
                            <div class="flex items-center gap-2 mb-3">
                                <span
                                    class="inline-flex items-center justify-center w-8 h-8 rounded-full bg-green-100 text-green-700 font-bold text-sm">A</span>
                                <h4 class="font-semibold text-gray-800">State Restoration Audit</h4>
                            </div>
                            <p class="text-sm text-gray-600 mb-2"><strong>Question:</strong> Which UI elements handle
                                rotation automatically?</p>
                            <p class="text-sm text-gray-600"><strong>Method:</strong> Create a form with an `EditText`,
                                a `Checkbox`, and a custom variable. Rotate the device without any code fixes. Document
                                what survived (hint: `EditText` with an ID survives!) and what was lost.</p>
                        </div>

                        <div class="bg-white rounded-xl border-2 p-5" style="border-color:#E3F2FD;">
                            <div class="flex items-center gap-2 mb-3">
                                <span
                                    class="inline-flex items-center justify-center w-8 h-8 rounded-full bg-blue-100 text-blue-700 font-bold text-sm">B</span>
                                <h4 class="font-semibold text-gray-800">Bundle Size Benchmark</h4>
                            </div>
                            <p class="text-sm text-gray-600 mb-2"><strong>Question:</strong> How much data is too much
                                for a Bundle?</p>
                            <p class="text-sm text-gray-600"><strong>Method:</strong> Try to save a small string vs. a
                                massive 1MB string in the state Bundle. Observe if the app crashes with a
                                `TransactionTooLargeException`. This shows why Bundles are for *state*, not *data*.</p>
                        </div>

                        <div class="bg-white rounded-xl border-2 p-5" style="border-color:#F3E5F5;">
                            <div class="flex items-center gap-2 mb-3">
                                <span
                                    class="inline-flex items-center justify-center w-8 h-8 rounded-full bg-purple-100 text-purple-700 font-bold text-sm">C</span>
                                <h4 class="font-semibold text-gray-800">The "Config Hidden" Trick</h4>
                            </div>
                            <p class="text-sm text-gray-600 mb-2"><strong>Question:</strong> Should we just tell Android
                                *not* to restart the app?</p>
                            <p class="text-sm text-gray-600"><strong>Method:</strong> Add
                                `android:configChanges="orientation|screenSize"` to your Manifest. Observe that
                                `onDestroy` no longer fires on rotation. Research why this is considered a **bad
                                practice** for most apps.</p>
                        </div>
                    </div>
                </section>

                <!-- ALTERNATIVES -->
                <section id="alternatives" class="content-section animate-in">
                    <h2>üîÑ Alternative Approaches</h2>
                    <div class="space-y-4">
                        <div class="bg-gradient-to-r from-gray-50 to-white rounded-xl p-5 border"
                            style="border-color:var(--border-light);">
                            <h4 class="font-semibold text-tru-primary mb-2">Process Death Simulation</h4>
                            <p class="text-sm text-gray-600">Rotation isn't the only way to lose state. Sometimes
                                Android kills your app in the background to save memory. Research how to use the
                                **"Don't Keep Activities"** developer option to simulate this and test your app's true
                                survival skills.</p>
                        </div>
                        <div class="bg-gradient-to-r from-gray-50 to-white rounded-xl p-5 border"
                            style="border-color:var(--border-light);">
                            <h4 class="font-semibold text-tru-primary mb-2">Persistent Storage</h4>
                            <p class="text-sm text-gray-600">For data that must survive even if the phone reboots, use
                                **SharedPreferences** or **Room**. Research the trade-off between Lifecycle State (fast,
                                disappears on close) and Database State (slower, permanent).</p>
                        </div>
                    </div>
                </section>

                <!-- POSTER TIPS -->
                <section id="poster-tips" class="content-section animate-in">
                    <h2>üé® Tips for Your Research Poster</h2>
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                        <div class="bg-teal-50 rounded-xl p-5 border border-teal-100">
                            <h4 class="font-semibold text-tru-primary mb-2">üìä Essential Visuals</h4>
                            <ul class="text-sm text-gray-600 space-y-2 list-disc ml-4">
                                <li>The official lifecycle "Loop" diagram</li>
                                <li>A screenshot of your Logcat showing the methods firing</li>
                                <li>A "Before and After" state persistence table</li>
                            </ul>
                        </div>
                        <div class="bg-rose-50 rounded-xl p-5 border border-rose-100">
                            <h4 class="font-semibold text-tru-primary mb-2">‚úçÔ∏è Content Focus</h4>
                            <p class="text-sm text-gray-600">Focus on **User Experience**. Explain that users expect
                                apps to behave like desktop software‚Äîwhere windows can be resized without losing what
                                you're working on.</p>
                        </div>
                    </div>
                </section>

                <!-- PITFALLS -->
                <section id="pitfalls" class="content-section animate-in">
                    <h2>‚ö†Ô∏è Common Pitfalls &amp; FAQ</h2>
                    <div class="space-y-4">
                        <details class="bg-gray-50 rounded-xl border p-4" style="border-color:var(--border-light);">
                            <summary class="font-semibold text-gray-700 cursor-pointer">"Why does some text survive
                                rotation even without code?"</summary>
                            <p class="text-sm text-gray-600 mt-3">Android automatically saves the state of any View that
                                has an **android:id**. If your EditText has no ID, its text will be lost. This is a
                                common beginner mistake!</p>
                        </details>
                        <details class="bg-gray-50 rounded-xl border p-4" style="border-color:var(--border-light);">
                            <summary class="font-semibold text-gray-700 cursor-pointer">"Which is better: ViewModel or
                                Bundle?"</summary>
                            <p class="text-sm text-gray-600 mt-3">ViewModels are better for "Active" state during
                                rotation. Bundles are necessary for "Survival State" (if the OS kills the process).
                                Professional apps use **both** (Calculated via `SavedStateHandle`).</p>
                        </details>
                        <details class="bg-gray-50 rounded-xl border p-4" style="border-color:var(--border-light);">
                            <summary class="font-semibold text-gray-700 cursor-pointer">"Can rotation cause memory
                                leaks?"</summary>
                            <p class="text-sm text-gray-600 mt-3">Yes! If you keep a reference to a Context or a View in
                                a static variable or a long-running background thread, you'll leak the entire old
                                Activity because it can't be garbage collected.</p>
                        </details>
                    </div>
                </section>

                <!-- CHECKLIST -->
                <section id="checklist" class="checkbox-container content-section animate-in">
                    <h2>‚úÖ Research Checklist</h2>
                    <div class="space-y-1">
                        <div class="checklist-item">
                            <div class="checklist-box"></div>
                            <p class="text-sm font-medium text-gray-700">Create a basic counter app and observe data
                                loss on rotation</p>
                        </div>
                        <div class="checklist-item">
                            <div class="checklist-box"></div>
                            <p class="text-sm font-medium text-gray-700">Add Logcat tags to all 7 core lifecycle methods
                            </p>
                        </div>
                        <div class="checklist-item">
                            <div class="checklist-box"></div>
                            <p class="text-sm font-medium text-gray-700">Implement onSaveInstanceState to preserve a
                                counter variable</p>
                        </div>
                        <div class="checklist-item">
                            <div class="checklist-box"></div>
                            <p class="text-sm font-medium text-gray-700">Use a ViewModel to persist data without using
                                Bundles</p>
                        </div>
                        <div class="checklist-item">
                            <div class="checklist-box"></div>
                            <p class="text-sm font-medium text-gray-700">Try to trigger a TransactionTooLargeException
                                with a massive Bundle</p>
                        </div>
                        <div class="checklist-item">
                            <div class="checklist-box"></div>
                            <p class="text-sm font-medium text-gray-700">Test different config changes like 'Language
                                Swapping' or 'Dark Mode'</p>
                        </div>
                        <div class="checklist-item">
                            <div class="checklist-box"></div>
                            <p class="text-sm font-medium text-gray-700">Take screenshots of the lifecycle logs for the
                                poster</p>
                        </div>
                    </div>
                </section>

            </main>
        </div>
    </div>

    <!-- FOOTER -->
    <footer class="bg-tru-primary text-white/70 py-8 mt-8">
        <div class="max-w-6xl mx-auto px-6 flex flex-col md:flex-row justify-between items-center gap-4">
            <div class="text-sm"><a href="../index.html" class="text-white hover:text-tru-accent transition-colors">‚Üê
                    Back to All Topics</a></div>
            <div class="text-sm">Created by <span class="font-semibold text-white">Research Coaches</span> for guidance.
            </div>
        </div>
    </footer>

    <script>
        const sections = document.querySelectorAll('.content-section');
        const navLinks = document.querySelectorAll('.sidebar-nav a');
        const observer = new IntersectionObserver((entries) => {
            entries.forEach(entry => {
                if (entry.isIntersecting) {
                    navLinks.forEach(link => link.classList.remove('active'));
                    const id = entry.target.id;
                    const activeLink = document.querySelector(`.sidebar-nav a[href="#${id}"]`);
                    if (activeLink) activeLink.classList.add('active');
                }
            });
        }, { rootMargin: '-20% 0px -70% 0px' });
        sections.forEach(s => observer.observe(s));
        navLinks.forEach(link => {
            link.addEventListener('click', e => {
                e.preventDefault();
                const id = link.getAttribute('href').substring(1);
                document.getElementById(id).scrollIntoView({ behavior: 'smooth' });
            });
        });
    </script>
</body>

</html>